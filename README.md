# 文本到图片加密系统

这是一个创新的加密系统，可以将文本转换为不同进制表示，然后生成彩色像素图片，用于文本加密和解密。

## 功能特点

- 支持多种进制（2-16进制）加密
- 将文本转换为不同进制表示
- 将进制数据转换为彩色像素图片
- 从加密图片中提取并解密原始文本
- 支持自动识别进制
- 可自定义每个进制位的像素大小（默认为9×16像素）
- 防止文件名冲突，自动重命名

## 进制颜色映射

本系统使用不同颜色表示不同进制的各个字符，具体映射关系如下：

### 2-10进制

| 进制 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
|------|---|---|---|---|---|---|---|---|---|---|
| 2    | 白色 | 黑色 | - | - | - | - | - | - | - | - |
| 3    | 白色 | 蓝色 | 红色 | - | - | - | - | - | - | - |
| 4    | 白色 | 蓝色 | 绿色 | 红色 | - | - | - | - | - | - |
| 5    | 白色 | 蓝色 | 绿色 | 黄色 | 红色 | - | - | - | - | - |
| 6    | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 红色 | - | - | - | - |
| 7    | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 红色 | - | - | - |
| 8    | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 红色 | - | - |
| 9    | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 紫色 | 红色 | - |
| 10   | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 紫色 | 粉色 | 红色 |

### 11-16进制

| 进制 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | A | B | C | D | E | F |
|------|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| 11   | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 紫色 | 粉色 | 棕色 | 红色 | - | - | - | - | - |
| 12   | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 紫色 | 粉色 | 棕色 | 红色 | 暗红色 | - | - | - | - |
| 13   | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 紫色 | 粉色 | 棕色 | 红色 | 暗红色 | 栗色 | - | - | - |
| 14   | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 紫色 | 粉色 | 棕色 | 红色 | 暗红色 | 栗色 | 深红色 | - | - |
| 15   | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 紫色 | 粉色 | 棕色 | 红色 | 暗红色 | 栗色 | 深红色 | 火砖色 | - |
| 16   | 白色 | 蓝色 | 绿色 | 青色 | 黄色 | 品红色 | 橙色 | 紫色 | 粉色 | 棕色 | 红色 | 暗红色 | 栗色 | 深红色 | 火砖色 | 黑色 |

## 安装依赖

```bash
pip install pillow numpy
```

## 使用方法

### GUI界面使用

运行GUI程序：

```bash
python gui_app.py
```

GUI界面提供以下功能：
1. **加密选项卡**：
   - 输入要加密的文本
   - 选择进制（2-16进制，默认16进制）
   - 选择保存路径
   - 点击"加密文本"按钮生成加密图片
   - 预览加密后的图片

2. **解密选项卡**：
   - 选择要解密的图片
   - 选择进制（"自动识别"或2-16进制，默认自动识别）
   - 点击"解密图片"按钮提取文本
   - 显示解密结果和识别的进制

### 命令行使用

#### 1. 加密文本

```bash
python image_encryptor.py encrypt "要加密的文本" output_image.png --base 16
```

参数说明：
- `text`: 要加密的文本
- `output_img`: 输出图片路径
- `--base`: 使用的进制（2-16，默认16）
- `--block-width`: 每个进制位的宽度（像素），默认为9
- `--block-height`: 每个进制位的高度（像素），默认为16

#### 2. 解密文本

```bash
python image_encryptor.py decrypt encrypted_image.png --base 16
```

参数说明：
- `img_path`: 包含加密信息的图片路径
- `--base`: 使用的进制（2-16或"auto"，默认auto）
- `--block-width`: 每个进制位的宽度（像素），默认为9
- `--block-height`: 每个进制位的高度（像素），默认为16

### Python代码使用

#### 加密文本

```python
from image_encryptor import TextToImageEncryptor

# 初始化加密器
encryptor = TextToImageEncryptor(block_width=9, block_height=16, base=16)

# 要加密的文本
secret_text = "这是一个秘密消息!"

# 加密文本并生成图片
binary_string, actual_path = encryptor.encrypt_to_image(
    secret_text, 
    "encrypted_image.png"
)

print(f"进制表示: {binary_string}")
print(f"保存路径: {actual_path}")
```

#### 解密文本

```python
from image_encryptor import ImageToTextDecryptor

# 初始化解密器（不指定进制，自动识别）
decryptor = ImageToTextDecryptor(block_width=9, block_height=16)

# 从图片中解密文本
decrypted_text, binary_string, detected_base = decryptor.decrypt_from_image_with_binary(
    "encrypted_image.png"
)

print(f"解密结果: {decrypted_text}")
print(f"进制数据: {binary_string}")
print(f"识别的进制: {detected_base}")
```

### 运行测试

```bash
python test_decrypt.py
```

## 工作原理

1. **文本转进制**: 将每个字符转换为ASCII码，然后转换为指定进制的表示
2. **生成进制图片**: 
   - 每个进制字符使用特定颜色的像素块表示
   - 每个进制位使用9×16像素的块表示
3. **解密过程**:
   - 从图片中提取像素块
   - 根据像素颜色识别进制字符
   - 将进制数据转换回原始文本

## 注意事项

- 当保存加密图片时，如果目标文件已存在，系统会自动添加序号（如`test_1.png`、`test_2.png`等）以避免覆盖
- 解密时可以选择"自动识别"进制，系统会根据图片中出现的颜色自动判断使用的进制
- 此加密方法主要用于教育和娱乐目的，不适合高安全性要求的场景

## 示例

运行`test_decrypt.py`将创建一个完整的测试，包括：
1. 使用不同进制加密文本
2. 生成加密图片
3. 从加密图片中解密文本
4. 验证加密解密结果

## 文件结构

```
image_encryptor.py  - 主程序文件
gui_app.py          - GUI界面程序
test_decrypt.py     - 测试脚本
demo.py            - 演示脚本
README.md          - 说明文档
生成的图片/         - 加密图片保存目录
```

## 自定义

您可以通过修改以下参数来自定义加密解密过程：
- `block_width`和`block_height`: 调整每个进制位的像素大小
- `base`: 选择使用的进制（2-16）
- 颜色映射：在`image_encryptor.py`中的`base_colors`字典中修改颜色映射关系